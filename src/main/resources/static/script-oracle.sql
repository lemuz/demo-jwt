REM     ***********************************************************************
REM     File script-tablespace.sql
REM     Date: May 18, 2021
REM     Author: Alex Lemus
REM     Purpose: Create a tablespace for our practice
REM     ***********************************************************************

CREATE TABLESPACE my_tablespace
DATAFILE 'C:\Users\alexl\Documents\oracle\prueba1\data\prueba1_data.dbf'
SIZE 2M
/

REM     ***********************************************************************
REM     File user.sql
REM     Date: May 18, 2021
REM     Author: Alex Lemus
REM     Purpose: Create a tablespace for our practice
REM     ***********************************************************************

CREATE USER db_user1
IDENTIFIED BY Prueba123
DEFAULT TABLESPACE my_tablespace
/

GRANT DBA TO db_user1
/

CREATE TABLE usuarios(
    idusr NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
    codigo VARCHAR(10) NOT NULL,
    nombre VARCHAR(100) NOT NULL,
    clave VARCHAR(60) NOT NULL,
    PRIMARY KEY(idusr)
)
TABLESPACE my_tablespace;


CREATE TABLE opciones_menu(
    idopc NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
    etiqueta VARCHAR2(100) NOT NULL,
    comando VARCHAR2(500) NOT NULL,
    estado VARCHAR2(3) NOT NULL,
    PRIMARY KEY(idopc)
)
TABLESPACE my_tablespace;

CREATE TABLE accessos_usuario(
    idacc NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
    idopc NUMBER(10) NOT NULL,
    idusr NUMBER(10) NOT NULL,
    PRIMARY KEY(idacc),
    CONSTRAINT fk_accesoss_opciones FOREIGN KEY(idopc) REFERENCES opciones_menu(idopc),
    CONSTRAINT fk_accessos_usuarios FOREIGN KEY(idusr) REFERENCES usuarios(idusr)
)
TABLESPACE my_tablespace;

INSERT INTO usuarios(idusr,codigo,nombre,clave) VALUES(1,'JPEREZ','Juan Pérez','$2a$10$MHTMNwrKx9EZeUS1pOU8X.dg9Ams0wl5vvHvBbPe1o11qmMf6j6eK');
INSERT INTO usuarios(idusr,codigo,nombre,clave) VALUES(2,'MRECINOS','Mónica Recinos','$2a$10$tfkn0pMFaMCMJzI223UWSucwLY3Qr6QdKz6L4w5SZl9qz/QfHER6a');

INSERT INTO opciones_menu(idopc,etiqueta,comando,estado) VALUES(1,'Mantenimiento de Usuarios','...','ACT');
INSERT INTO opciones_menu(idopc,etiqueta,comando,estado) VALUES(2,'Mantenimiento de Opciones','...','INA');
INSERT INTO opciones_menu(idopc,etiqueta,comando,estado) VALUES(3,'Mantenimiento de Roles','...','ACT');
INSERT INTO opciones_menu(idopc,etiqueta,comando,estado) VALUES(4,'Mantenimiento de Permisos','...','ACT');

INSERT INTO accessos_usuario(idacc,idopc,idusr) VALUES(1,1,1);
INSERT INTO accessos_usuario(idacc,idopc,idusr) VALUES(2,2,1);
INSERT INTO accessos_usuario(idacc,idopc,idusr) VALUES(3,4,1);
INSERT INTO accessos_usuario(idacc,idopc,idusr) VALUES(4,1,2);
INSERT INTO accessos_usuario(idacc,idopc,idusr) VALUES(5,3,2);
